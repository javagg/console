define(["jquery","underscore","appsecute-api/lib/event","appsecute-api/lib/logger","appsecute-api/lib/utils","appsecute-api/lib/settings"],function(t,e,n,r,u,i){var c=null,a=null,o=new r("Start"),s=new n("Start Document Uri Set",this),l=!1,p=!1,f=[],m=function(){var t=f.slice(0);return f=[],t},b=function(e,n,r){var s=!0;if(a&&(a.hasOwnProperty(e)?(s=!1,u.isFunction(n)&&n(a[e])):l?(s=!1,u.isFunction(r)&&(o.error("Unable to find start document uri with name '"+e+"'."),r("NOT_FOUND"))):(a=null,l=!0)),s){if(!c)throw"Unable to read Start Document because _startDocumentUri not set";f.push({name:e,success:n,error:r}),p||(p=!0,require(["appsecute-api/lib/http-client"],function(e){var n={url:c,verb:"GET",data:null};e.executeHttpRequest(n,i.httpRequestTimeOut,function(e,n){p=!1,a=n.body;var r=m();t.each(r,function(t,e){b(e.name,e.success,e.error)})},function(e,r){p=!1;var i=m();t.each(i,function(t,e){u.isFunction(e.error)&&e.error("START_DOCUMENT_FAILED",n,r)})})}))}};return{startDocumentUriSet:s,setStartDocumentUri:function(t){c=t,s.trigger({uri:c})},setLocalStartDocument:function(t){a=t,s.trigger({uri:null})},getUri:function(t,e,n){b(t,e,n)},getStartDocumentUri:function(){return c}}});
//# sourceMappingURL=start.js.map