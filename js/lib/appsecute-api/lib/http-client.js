define(["jquery","appsecute-api/lib/utils","appsecute-api/lib/logger","appsecute-api/lib/start"],function(e,t,a,r){var n=new a("HttpClient"),o=function(e){try{return JSON.parse(e.responseText)}catch(t){return e.responseText}},s=function(e){var a=e.headers||{};"GET"!==e.verb&&(a["X-CSRF-Token"]=t.getCookie("authenticity_token"));var r=t.getCookie("cf_token");return r&&(a.Authorization="bearer "+r),a},i=function(a,r,i,c){try{a.handle=e.ajax({url:a.url,accept:"application/json",contentType:a.data?"application/json":"",dataType:"text",type:a.verb,async:!0,data:a.data?JSON.stringify(a.data):null,timeout:r,headers:s(a),processData:!1,cache:!1,success:function(e,r,n){if(t.isFunction(i)){var s={status_code:n.status,body:o(n),headers:t.processHttpHeaders(n.getAllResponseHeaders()),jqXHR:n};201===s.status_code&&s.body&&(s.body.id||s.body.location)&&(s.headers.id=s.body.id,s.headers.location=s.body.location),i(a,s)}},error:function(e){if(t.isFunction(c)){var r={status_code:e.status,body:o(e),headers:t.processHttpHeaders(e.getAllResponseHeaders()),jqXHR:e};c(a,r)}}})}catch(u){n.error("An exception occurred processing an HTTP Request: "+u)}};return{executeHttpRequest:function(e,a,n,o){t.isUrl(e.url)?i(e,a,n,o):r.getUri(e.url,function(t){e.url=t,i(e,a,n,o)},function(){i(e,a,n,o)})}}});
//# sourceMappingURL=http-client.js.map