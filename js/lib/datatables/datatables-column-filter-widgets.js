!function(e){e.fn.dataTableExt.oApi.fnGetColumnData=function(e,t,n,i,a){if("undefined"==typeof t)return new Array;"undefined"==typeof n&&(n=!0),"undefined"==typeof i&&(i=!0),"undefined"==typeof a&&(a=!0);var o;o=1==i?e.aiDisplay:e.aiDisplayMaster;for(var r=new Array,l=0,s=o.length;s>l;l++){var u=o[l],d=this.fnGetData(u,t);(1!=a||0!=d.length)&&(1==n&&jQuery.inArray(d,r)>-1||r.push(d))}return r};var t=function(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},n=function(t){var n=this,a="";return n.$WidgetContainer=e('<div class="column-filter-widgets"></div>'),n.$MenuContainer=n.$WidgetContainer,n.$TermContainer=null,n.aoWidgets=[],n.sSeparator="","oColumnFilterWidgets"in t.oInit&&("aiExclude"in t.oInit.oColumnFilterWidgets&&(a="|"+t.oInit.oColumnFilterWidgets.aiExclude.join("|")+"|"),"bGroupTerms"in t.oInit.oColumnFilterWidgets&&t.oInit.oColumnFilterWidgets.bGroupTerms&&(n.$MenuContainer=e('<div class="column-filter-widget-menus"></div>'),n.$TermContainer=e('<div class="column-filter-widget-selected-terms"></div>').hide())),e.each(t.aoColumns,function(o){var r=e('<div class="column-filter-widget"></div>');a.indexOf("|"+o+"|")<0&&(n.aoWidgets.push(new i(r,t,o,n)),n.$MenuContainer.append(r))}),n.$TermContainer&&(n.$WidgetContainer.append(n.$MenuContainer),n.$WidgetContainer.append(n.$TermContainer)),t.aoDrawCallback.push({name:"ColumnFilterWidgets",fn:function(){e.each(n.aoWidgets,function(e,t){t.fnDraw()})}}),n};n.prototype.getContainer=function(){return this.$WidgetContainer.get(0)};var i=function(t,n,i,a){var o=this;o.iColumn=i,o.oColumn=n.aoColumns[i],o.$Container=t,o.oDataTable=n.oInstance,o.asFilters=[],o.sSeparator="",o.bSort=!0,o.iMaxSelections=-1,"oColumnFilterWidgets"in n.oInit&&("sSeparator"in n.oInit.oColumnFilterWidgets&&(o.sSeparator=n.oInit.oColumnFilterWidgets.sSeparator),"iMaxSelections"in n.oInit.oColumnFilterWidgets&&(o.iMaxSelections=n.oInit.oColumnFilterWidgets.iMaxSelections),"aoColumnDefs"in n.oInit.oColumnFilterWidgets&&e.each(n.oInit.oColumnFilterWidgets.aoColumnDefs,function(t,n){var a="|"+n.aiTargets.join("|")+"|";a.indexOf("|"+i+"|")>=0&&e.each(n,function(e,t){o[e]=t})})),o.$Select=e("<select></select>").change(function(){var t,n,i,r=o.$Select.val();""!==r&&(t=e("<div>"+r+"</div>").text(),n=e('<a class="filter-term" href="#"></a>').addClass("filter-term-"+t.toLowerCase().replace(/\W/g,"")).text(t).click(function(){return o.asFilters=e.grep(o.asFilters,function(e){return e!=r}),n.remove(),a.$TermContainer&&0===a.$TermContainer.find(".filter-term").length&&a.$TermContainer.hide(),o.$Select.append(e("<option></option>").attr("value",r).text(t)),o.iMaxSelections>0&&o.iMaxSelections>o.asFilters.length&&o.$Select.attr("disabled",!1),o.fnFilter(),!1}),o.asFilters.push(r),a.$TermContainer?(a.$TermContainer.show(),a.$TermContainer.prepend(n)):o.$Select.after(n),i=o.$Select.children("option:selected"),o.$Select.val(""),i.remove(),o.iMaxSelections>0&&o.iMaxSelections<=o.asFilters.length&&o.$Select.attr("disabled",!0),o.fnFilter())}),o.$Container.append(o.$Select),o.fnDraw()};if(i.prototype.fnFilter=function(){var n,i,a=this,o=[];a.asFilters.length>0?(e.each(a.asFilters,function(e,n){o.push(t(n))}),n=a.sSeparator?"(^|"+a.sSeparator+")(":"^(",i=a.sSeparator?")("+a.sSeparator+"|$)":")$",a.oDataTable.fnFilter(n+o.join("|")+i,a.iColumn,!0,!1)):a.oDataTable.fnFilter("",a.iColumn)},i.prototype.fnDraw=function(){var t,n=this,i={},a=[];0===n.asFilters.length&&(t=n.oDataTable.fnGetColumnData(n.iColumn),e.each(t,function(t,o){var r=n.sSeparator?o.split(new RegExp(n.sSeparator)):[o];e.each(r,function(e,t){i.hasOwnProperty(t)||(i[t]=!0,a.push(t))})}),n.$Select.empty().append(e("<option></option>").attr("value","").text(n.oColumn.sTitle)),n.bSort&&(n.hasOwnProperty("fnSort")?a.sort(n.fnSort):a.sort()),e.each(a,function(t,i){var a;a=e("<div>"+i+"</div>").text(),n.$Select.append(e("<option></option>").attr("value",i).text(a))}),a.length>1?n.$Select.attr("disabled",!1):n.$Select.attr("disabled",!0))},"function"!=typeof e.fn.dataTable||"function"!=typeof e.fn.dataTableExt.fnVersionCheck||!e.fn.dataTableExt.fnVersionCheck("1.7.0"))throw"Warning: ColumnFilterWidgets requires DataTables 1.7 or greater - www.datatables.net/download";e.fn.dataTableExt.aoFeatures.push({fnInit:function(e){var t=new n(e);return t.getContainer()},cFeature:"W",sFeature:"ColumnFilterWidgets"})}(jQuery);
//# sourceMappingURL=datatables-column-filter-widgets.js.map